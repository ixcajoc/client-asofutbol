<div
  class="relative w-full border-4 rounded-3xl shadow-xl overflow-hidden group
         bg-gradient-to-b dark:bg-gradient-to-b transition-all duration-300
         hover:shadow-2xl hover:-translate-y-1"
  [ngClass]="{
    'from-emerald-200 via-emerald-100 to-teal-50': isPos('PORTERO'),
    'from-sky-200 via-sky-100 to-blue-50': isPos('DEFENSA'),
    'from-amber-200 via-amber-100 to-yellow-50': isPos('MEDIOCAMPISTA'),
    'from-rose-200 via-rose-100 to-orange-50': isPos('DELANTERO'),
 
    'dark:from-emerald-800 dark:via-emerald-900 dark:to-teal-950': isPos('PORTERO'),
    'dark:from-sky-800 dark:via-sky-900 dark:to-blue-950': isPos('DEFENSA'),
    'dark:from-amber-800 dark:via-amber-900 dark:to-yellow-950': isPos('MEDIOCAMPISTA'),
    'dark:from-rose-800 dark:via-rose-900 dark:to-orange-950': isPos('DELANTERO'),
 
    'border-emerald-400 dark:border-emerald-500': isPos('PORTERO'),
    'border-sky-400 dark:border-sky-500': isPos('DEFENSA'),
    'border-amber-400 dark:border-amber-500': isPos('MEDIOCAMPISTA'),
    'border-rose-400 dark:border-rose-500': isPos('DELANTERO')
  }"
  [attr.aria-label]="'Tarjeta de ' + playerData.nombre + ' ' + playerData.apellido"
>
  <!-- Badge de estado activo -->
  <span
    *ngIf="playerData?.activo"
    class="absolute top-3 right-3 z-10 inline-flex items-center gap-1 rounded-full text-[10px] px-2 py-1 font-semibold shadow-md"
    [ngClass]="{
      'bg-emerald-600 text-white': isPos('PORTERO'),
      'bg-sky-600 text-white': isPos('DEFENSA'),
      'bg-amber-600 text-white': isPos('MEDIOCAMPISTA'),
      'bg-rose-600 text-white': isPos('DELANTERO')
    }"
    title="Jugador activo"
  >
    <span class="size-1.5 rounded-full bg-white animate-pulse"></span>
    Activo
  </span>

  <!-- Encabezado: Dorsal e Icono de Posici√≥n -->
  <div class="flex justify-between items-start px-4 pt-4">
    <!-- Dorsal -->
    <div class="text-center">
      <p class="text-4xl font-extrabold text-gray-900 dark:text-white leading-none">
        {{ playerData.numero_camiseta }}
      </p>
      <p class="text-[10px] uppercase font-bold tracking-wider text-gray-600 dark:text-gray-400 mt-0.5">
        Dorsal
      </p>
    </div>

    <!-- Icono de Posici√≥n -->
    <div class="flex flex-col items-center">
      <div
        class="w-10 h-10 flex items-center justify-center rounded-full shadow-sm transition-transform group-hover:scale-110"
        [ngClass]="{
          'bg-emerald-500/20 dark:bg-emerald-400/20': isPos('PORTERO'),
          'bg-sky-500/20 dark:bg-sky-400/20': isPos('DEFENSA'),
          'bg-amber-500/20 dark:bg-amber-400/20': isPos('MEDIOCAMPISTA'),
          'bg-rose-500/20 dark:bg-rose-400/20': isPos('DELANTERO')
        }"
      >
        <!-- Portero -->
        <ng-container *ngIf="isPos('PORTERO')">
          <svg
            class="w-6 h-6 fill-emerald-700 dark:fill-emerald-300"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 640 640"
            aria-hidden="true"
          >
            <path d="M320 64C324.6 64 329.2 65 333.4 66.9L521.8 146.8C543.8 156.1 560.2 177.8 560.1 204C559.6 303.2 518.8 484.7 346.5 567.2C329.8 575.2 310.4 575.2 293.7 567.2C121.3 484.7 80.6 303.2 80.1 204C80 177.8 96.4 156.1 118.4 146.8L306.7 66.9C310.9 65 315.4 64 320 64zM320 130.8L320 508.9C458 442.1 495.1 294.1 496 205.5L320 130.9L320 130.9z"/>
          </svg>
        </ng-container>

        <!-- Defensa -->
        <ng-container *ngIf="isPos('DEFENSA')">
          <svg
            class="w-6 h-6 stroke-sky-700 dark:stroke-sky-300"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
            aria-hidden="true"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
        </ng-container>

        <!-- Mediocampista -->
        <ng-container *ngIf="isPos('MEDIOCAMPISTA')">
          <svg
            class="w-6 h-6 stroke-amber-700 dark:stroke-amber-300"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
            aria-hidden="true"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
          </svg>
        </ng-container>

        <!-- Delantero -->
        <ng-container *ngIf="isPos('DELANTERO')">
          <svg
            class="w-6 h-6 fill-rose-700 dark:fill-rose-300"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 640 640"
            aria-hidden="true"
          >
            <path d="M451 292.3C446.6 289.5 443.4 285.3 441.8 280.4C440.2 275.5 440.4 270.2 442.3 265.4L475.6 182C455.7 159.6 431 141.5 403.2 129.3L334.1 186.9C330.1 190.2 325.1 192 320 192C314.9 192 309.8 190.2 305.9 186.9L236.8 129.3C209 141.5 184.3 159.6 164.4 182L197.8 265.4C199.7 270.2 199.9 275.5 198.3 280.4C196.7 285.3 193.4 289.5 189.1 292.3L113 340.2C116 371.1 125.7 399.9 140.6 425.4L230.3 419.4C235.5 419.1 240.6 420.5 244.8 423.6C249 426.7 252 431 253.2 436.1L275.2 523.3C289.6 526.5 304.6 528.1 320 528.1C335.4 528.1 350.3 526.4 364.8 523.3L386.8 436.1C388.1 431.1 391 426.7 395.2 423.6C399.4 420.5 404.5 419.1 409.7 419.4L499.4 425.4C514.4 400 524.1 371.1 527 340.3L451 292.3zM320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320C64 178.6 178.6 64 320 64zM382 285C390.4 291.1 393.9 301.9 390.7 311.8L372.4 368.1C369.2 378 360 384.7 349.6 384.7L290.4 384.7C280 384.7 270.8 378 267.6 368.1L249.3 311.8C246.1 301.9 249.6 291.1 258 285L305.9 250.2C314.3 244.1 325.7 244.1 334.1 250.2L382 285z"/>
          </svg>
        </ng-container>
      </div>
    </div>
  </div>

  <!-- Imagen del jugador -->
  <div class="relative flex justify-center mt-2">
    <div
      class="w-32 h-32 rounded-full overflow-hidden shadow-lg border-4 ring-2 ring-white/50 dark:ring-black/30 transition-transform group-hover:scale-105"
      [ngClass]="{
        'border-emerald-400 dark:border-emerald-500': isPos('PORTERO'),
        'border-sky-400 dark:border-sky-500': isPos('DEFENSA'),
        'border-amber-400 dark:border-amber-500': isPos('MEDIOCAMPISTA'),
        'border-rose-400 dark:border-rose-500': isPos('DELANTERO')
      }"
    >
      <img
        class="w-full h-full object-cover"
        [src]="playerImgUrl"
        [alt]="'Foto de ' + playerData.nombre + ' ' + playerData.apellido"
        loading="lazy"
        (error)="onImgError($event)"
      />
    </div>
  </div>

  <!-- Nombre, equipo y posici√≥n -->
  <div class="mt-4 text-center px-4">
    <h3 class="text-lg font-bold text-gray-900 dark:text-white tracking-wide uppercase leading-tight">
      {{ playerData.nombre }} {{ playerData.apellido }}
    </h3>
    
    <p class="text-xs font-medium text-gray-600 dark:text-gray-400 mt-1">
      {{ playerData.equipo_nombre_corto }}
    </p>

    <!-- Posici√≥n con color tem√°tico -->
    <p
      class="text-sm font-bold mt-1.5 inline-block px-3 py-1 rounded-full"
      [ngClass]="{
        'text-emerald-800 bg-emerald-200/60 dark:text-emerald-200 dark:bg-emerald-700/40': isPos('PORTERO'),
        'text-sky-800 bg-sky-200/60 dark:text-sky-200 dark:bg-sky-700/40': isPos('DEFENSA'),
        'text-amber-800 bg-amber-200/60 dark:text-amber-200 dark:bg-amber-700/40': isPos('MEDIOCAMPISTA'),
        'text-rose-800 bg-rose-200/60 dark:text-rose-200 dark:bg-rose-700/40': isPos('DELANTERO')
      }"
    >
      {{ playerData.posicion }}
    </p>

    <!-- Edad, altura, peso -->
    <p class="text-xs text-gray-600 dark:text-gray-400 mt-2 flex items-center justify-center gap-1.5 flex-wrap">
      <span *ngIf="getEdad(playerData.fecha_nacimiento) as edad">{{ edad }} a√±os</span>
      <span *ngIf="getEdad(playerData.fecha_nacimiento)" class="text-gray-400">‚Ä¢</span>
      <span>{{ formatAltura(playerData.altura) }}</span>
      <span class="text-gray-400">‚Ä¢</span>
      <span>{{ formatPeso(playerData.peso) }}</span>
    </p>
  </div>

  <!-- Stats: Peso, Altura, Pie -->
  <div class="grid grid-cols-3 gap-3 text-center mt-4 px-4">
    <div class="flex flex-col items-center">
      <p class="text-base font-extrabold text-gray-900 dark:text-white">
        {{ formatPeso(playerData.peso) }}
      </p>
      <p class="text-[10px] tracking-widest uppercase text-gray-600 dark:text-gray-400 mt-0.5">
        Peso
      </p>
    </div>
    <div class="flex flex-col items-center">
      <p class="text-base font-extrabold text-gray-900 dark:text-white">
        {{ formatAltura(playerData.altura) }}
      </p>
      <p class="text-[10px] tracking-widest uppercase text-gray-600 dark:text-gray-400 mt-0.5">
        Altura
      </p>
    </div>
    <div class="flex flex-col items-center">
      <p class="text-base font-extrabold text-gray-900 dark:text-white">
        {{ playerData.pie_habil }}
      </p>
      <p class="text-[10px] tracking-widest uppercase text-gray-600 dark:text-gray-400 mt-0.5">
        Pie
      </p>
    </div>
  </div>

  <!-- Chip de nacionalidad -->
  <div class="flex justify-center mt-3 px-4">
    <span class="inline-flex items-center gap-1.5 text-xs font-medium px-3 py-1 rounded-full bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300">
      <svg class="w-3.5 h-3.5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z" clip-rule="evenodd"></path>
      </svg>
      {{ playerData.nacionalidad }}
    </span>
  </div>

  <!-- Botones de acci√≥n -->
  <div class="flex justify-center gap-3 px-4 pt-4 pb-6">
    <!-- Bot√≥n Editar -->
    <button
      type="button"
      [routerLink]="['/dashboard1/edit-player', playerData.id_jugador]"
      class="px-5 py-2.5 text-xs font-semibold rounded-full text-white shadow-md transition-all
             hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0
             focus:outline-none focus:ring-2 focus:ring-offset-2"
      [ngClass]="{
        'bg-emerald-500 hover:bg-emerald-600 focus:ring-emerald-400': isPos('PORTERO'),
        'bg-sky-500 hover:bg-sky-600 focus:ring-sky-400': isPos('DEFENSA'),
        'bg-amber-500 hover:bg-amber-600 focus:ring-amber-400': isPos('MEDIOCAMPISTA'),
        'bg-rose-500 hover:bg-rose-600 focus:ring-rose-400': isPos('DELANTERO')
      }"
      [attr.aria-label]="'Editar jugador ' + playerData.nombre + ' ' + playerData.apellido"
    >
      ‚úèÔ∏è Editar
    </button>

    <!-- Bot√≥n Eliminar -->
    <button
      type="button"
      (click)="confirmarEliminar(playerData.id_jugador)"
      class="px-5 py-2.5 text-xs font-semibold rounded-full shadow-md transition-all
             bg-neutral-200 text-neutral-700 hover:bg-neutral-300 hover:shadow-lg hover:-translate-y-0.5 active:translate-y-0
             dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700
             focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-400"
      [attr.aria-label]="'Eliminar jugador ' + playerData.nombre + ' ' + playerData.apellido"
    >
      üóëÔ∏è Eliminar
    </button>
  </div>
</div>